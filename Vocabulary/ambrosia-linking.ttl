@prefix rdf:    <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix rdfs:   <http://www.w3.org/2000/01/rdf-schema#> .
@prefix owl:    <http://www.w3.org/2002/07/owl#> .
@prefix skos:   <http://www.w3.org/2004/02/skos/core#> .
@prefix dct:    <http://purl.org/dc/terms/> .
@prefix xsd:    <http://www.w3.org/2001/XMLSchema#> .

@prefix qudt:   <http://qudt.org/schema/qudt/> .
@prefix qk:     <http://qudt.org/vocab/quantitykind/> .
@prefix unit:   <http://qudt.org/vocab/unit/> .
@prefix ncbitaxon: <http://purl.obolibrary.org/obo/NCBITaxon_> .

@prefix fskxo:  <http://semanticlookup.zbmed.de/km/fskxo/> .
@prefix model:  <https://www.ambrosia-project.eu/model/> .
@prefix vocab:  <https://www.ambrosia-project.eu/vocab/> .
@prefix amblink:<https://www.ambrosia-project.eu/vocab/linking/> .

#################################################################
# Ontology Header
#################################################################
amblink: a owl:Ontology ;
  dct:title "AMBROSIA Wiring Vocabulary"@en ;
  dct:description "Vocabulary for durable links between predictive models and data sources (inputs/outputs), with light-weight aggregation and transformation hints."@en ;
  owl:versionInfo "1.2.0" .

#################################################################
# Classes
#################################################################
amblink:InputMapping a owl:Class ;
  rdfs:label "Input Mapping"@en ;
  rdfs:comment "Binding describing how a model input parameter is fulfilled by a data variable."@en .

amblink:OutputMapping a owl:Class ;
  rdfs:label "Output Mapping"@en ;
  rdfs:comment "Binding describing how a model output parameter corresponds to an observed property and unit."@en .

amblink:ModelLink a rdfs:Class ;
  rdfs:comment "A link between two models, showing the flow of data from one model to another." .

amblink:ObservedProperty a rdfs:Class ;
  rdfs:comment "An observable property produced by a model, such as concentration or dose." .

amblink:Endpoint a rdfs:Class ;
  rdfs:comment "A health endpoint used in risk modeling (e.g., infection)." .

amblink:ExposureRoute a rdfs:Class ;
  rdfs:comment "The route of exposure (e.g., oral) used in risk modeling." .

amblink:Population a rdfs:Class ;
  rdfs:comment "The target population for a model (e.g., general population, risk groups)." .

amblink:FoodSafetyIncident a owl:Class ;
  rdfs:label "Food safety incident"@en ;
  rdfs:comment "Historical or observed food safety event, e.g. outbreak or contamination exceeding legal limits."@en .

amblink:MitigationMeasure a owl:Class ;
  rdfs:label "Mitigation measure"@en ;
  rdfs:comment "Action or intervention to reduce food safety risk."@en .

#################################################################
# Core Object Properties (Input side — static knowledge)
#################################################################
amblink:hasInputMapping a owl:ObjectProperty ;
  rdfs:label "has input mapping"@en ;
  rdfs:comment "Attach one or more input mappings to a model."@en ;
  rdfs:domain fskxo:FSKXO_0000018113 ;        # Predictive model
  rdfs:range  amblink:InputMapping .

amblink:mapsParameter a owl:ObjectProperty ;
  rdfs:label "maps parameter"@en ;
  rdfs:comment "The model parameter (input or output) that this mapping refers to."@en ;
  rdfs:domain [ a owl:Class ;
                owl:unionOf ( amblink:InputMapping amblink:OutputMapping ) ] ;
  rdfs:range  vocab:ModelParameter .

amblink:isFulfilledBy a owl:ObjectProperty ;
  rdfs:label "is fulfilled by"@en ;
  rdfs:comment "The conceptual data variable (e.g., a netCDF/CF concept) providing the values for the input."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  skos:Concept .

amblink:preferredInputUnit a owl:ObjectProperty ;
  rdfs:label "preferred input unit"@en ;
  rdfs:comment "Preferred unit for an input parameter; backend converts source data if needed."@en ;
  rdfs:domain vocab:ModelParameter ;
  rdfs:range  qudt:Unit .

#################################################################
# Core Object Properties (Output side — static knowledge)
#################################################################
amblink:hasOutputMapping a owl:ObjectProperty ;
  rdfs:label "has output mapping"@en ;
  rdfs:comment "Attach one or more output mappings to a model."@en ;
  rdfs:domain fskxo:FSKXO_0000018113 ;
  rdfs:range  amblink:OutputMapping .

amblink:producesObservedProperty a owl:ObjectProperty ;
  rdfs:label "produces observed property"@en ;
  rdfs:comment "Observed property concept represented by this output (e.g., risk probability, predicted concentration)."@en ;
  rdfs:domain amblink:OutputMapping ;
  rdfs:range  skos:Concept .

amblink:representsStatistic a owl:ObjectProperty ;
  rdfs:label "represents statistic"@en ;
  rdfs:comment "Specifies if the output represents a mean, max, percentile, etc."@en ;
  rdfs:domain amblink:OutputMapping ;
  rdfs:range  skos:Concept .

amblink:hasOutputUnit a owl:ObjectProperty ;
  rdfs:label "has output unit"@en ;
  rdfs:comment "Unit of the output values (QUDT Unit)."@en ;
  rdfs:domain amblink:OutputMapping ;
  rdfs:range  qudt:Unit .

#################################################################
# Aggregation / Temporal / Transformation Hints
#################################################################
amblink:aggregationMethod a owl:ObjectProperty ;
  rdfs:label "aggregation method"@en ;
  rdfs:comment "Spatial/temporal aggregation used to derive the input (e.g., area-weighted mean, time mean)."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  skos:Concept .

amblink:temporalAlignment a owl:ObjectProperty ;
  rdfs:label "temporal alignment"@en ;
  rdfs:comment "Resampling/alignment between dataset time steps and model step (e.g., daily-to-weekly, monthly-mean, lag=3d)."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  skos:Concept .

amblink:requiresTransformation a owl:ObjectProperty ;
  rdfs:label "requires transformation"@en ;
  rdfs:comment "Indicates a derived-input transformation (e.g., precip → RH proxy), referenced as a concept."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  skos:Concept .

amblink:temporalWindow a owl:DatatypeProperty ;
  rdfs:label "temporal window"@en ;
  rdfs:comment "ISO 8601 duration describing the window for aggregation (e.g., P1M, P7D)."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  xsd:duration .

#################################################################
# Data Properties for the Data Access Layer
#################################################################
amblink:sourceVariableName a owl:DatatypeProperty ;
  rdfs:label "source variable name"@en ;
  rdfs:comment "Technical variable name in the source (e.g., 'tas', 'pr')."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  xsd:string .

amblink:sourceDataset a owl:DatatypeProperty ;
  rdfs:label "source dataset identifier"@en ;
  rdfs:comment "Identifier/URI of the dataset (e.g., 'EURO-CORDEX-XXX')."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  xsd:string .

amblink:transformationHint a owl:DatatypeProperty ;
  rdfs:label "transformation hint"@en ;
  rdfs:comment "Free-text/code ref for the transformation (e.g., function name, doc URL)."@en ;
  rdfs:domain amblink:InputMapping ;
  rdfs:range  xsd:string .

#################################################################
# SKOS Schemes for controlled hints (enumerations)
#################################################################
amblink:AggregationMethod a skos:ConceptScheme ;
  skos:prefLabel "Aggregation methods"@en ;
  dct:description "Controlled list of spatial/temporal aggregation methods for inputs."@en .

amblink:areaWeightedMean a skos:Concept ;
  skos:inScheme amblink:AggregationMethod ;
  skos:prefLabel "Area-weighted mean"@en ;
  skos:definition "Mean over an area where each grid cell is weighted by its area overlap with the region mask."@en .

amblink:timeMean a skos:Concept ;
  skos:inScheme amblink:AggregationMethod ;
  skos:prefLabel "Time mean"@en ;
  skos:definition "Mean calculated over the specified temporal window."@en .

amblink:TemporalAlignment a skos:ConceptScheme ;
  skos:prefLabel "Temporal alignment methods"@en .

amblink:dailyToMonthlyMean a skos:Concept ;
  skos:inScheme amblink:TemporalAlignment ;
  skos:prefLabel "Daily → monthly mean"@en .

amblink:Transformation a skos:ConceptScheme ;
  skos:prefLabel "Derived-input transformations"@en ;
  dct:description "Lightweight references to transformations from raw variables to model-ready inputs."@en .

#################################################################
# Linking-specific Properties, Classes, and Concepts
#################################################################

# Properties
amblink:forTaxon a owl:ObjectProperty ;
  rdfs:comment "Links a model to a specific taxon (e.g., NCBITaxon)." .

amblink:forMatrix a owl:ObjectProperty ;
  rdfs:comment "Links a model to a matrix (e.g., food, sample)." .

amblink:endpoint a owl:ObjectProperty ;
  rdfs:comment "Links a model to a health endpoint (e.g., infection)." .

amblink:exposureRoute a owl:ObjectProperty ;
  rdfs:comment "Links a model to an exposure route (e.g., oral)." .

amblink:population a owl:ObjectProperty ;
  rdfs:comment "Links a model to a target population (e.g., general population)." .

amblink:expectsObservedProperty a owl:ObjectProperty ;
  rdfs:comment "Describes the observed property that is expected as an input for the model." .

amblink:expectsUnit a owl:ObjectProperty ;
  rdfs:comment "Describes the unit expected for the input (e.g., CFU)." .

amblink:expectsQuantityKind a owl:ObjectProperty ;
  rdfs:comment "Describes the quantity kind expected for the input (e.g., concentration, dose)." .

amblink:hasOutputMapping a owl:ObjectProperty ;
  rdfs:comment "Links a model to an output mapping." .

amblink:producesObservedProperty a owl:ObjectProperty ;
  rdfs:comment "Indicates the observed property produced by the model." .

amblink:hasOutputUnit a owl:ObjectProperty ;
  rdfs:comment "Indicates the unit for the output parameter." .

amblink:hasOutputQuantityKind a owl:ObjectProperty ;
  rdfs:comment "Indicates the quantity kind for the output parameter." .

amblink:assumption a owl:DatatypeProperty ;
  rdfs:comment "Indicates an assumption, e.g., whether general→specific or vice versa." .

amblink:confidence a owl:DatatypeProperty ;
  rdfs:comment "Indicates the confidence or accuracy of a model link." .

# Food Safety Incident Properties
amblink:occursInRegion a owl:ObjectProperty ;
  rdfs:domain amblink:FoodSafetyIncident ;
  rdfs:range  <http://data.europa.eu/nuts/> .   # NUTS concepts

amblink:occursOn a owl:DatatypeProperty ;
  rdfs:domain amblink:FoodSafetyIncident ;
  rdfs:range  xsd:dateTime .

amblink:incidentHazard a owl:ObjectProperty ;
  rdfs:domain amblink:FoodSafetyIncident ;
  rdfs:range  skos:Concept . # from pathogen/mycotoxin scheme

amblink:incidentProduct a owl:ObjectProperty ;
  rdfs:domain amblink:FoodSafetyIncident ;
  rdfs:range  skos:Concept . # from plant/product vocab

amblink:incidentEconomicLoss a owl:DatatypeProperty ;
  rdfs:domain amblink:FoodSafetyIncident ;
  rdfs:range  xsd:decimal . # + currency via another property

amblink:regulatoryLimit a owl:DatatypeProperty ;
  rdfs:label "regulatory limit"@en ;
  rdfs:comment "The legal maximum limit (e.g. from EC 2073/2005) value."@en ;
  rdfs:domain amblink:FoodSafetyIncident ; # Or attach to the Hazard/Product pair context
  rdfs:range xsd:string . # e.g. "100 CFU/g"

# Mitigation Measure Properties
amblink:mitigatesHazard a owl:ObjectProperty ;
  rdfs:domain amblink:MitigationMeasure ;
  rdfs:range  skos:Concept . # hazard

amblink:mitigationForScenario a owl:ObjectProperty ;
  rdfs:domain amblink:MitigationMeasure ;
  rdfs:range  amblink:RiskLevel . # or Scenario Concept

amblink:hasChecklistItem a owl:DatatypeProperty ;
  rdfs:domain amblink:MitigationMeasure ;
  rdfs:range  xsd:string .

# Concept Schemes
amblink:ObservedProperty a skos:ConceptScheme ;
  skos:prefLabel "Observed Property (Ambrosia Linking)"@en .
amblink:Endpoint a skos:ConceptScheme .
amblink:ExposureRoute a skos:ConceptScheme .
amblink:Population a skos:ConceptScheme .
amblink:RiskLevel a skos:ConceptScheme ;
  skos:prefLabel "Risk level categories"@en .

amblink:Statistic a skos:ConceptScheme ;
  skos:prefLabel "Statistical metrics"@en .

# Concepts
amblink:RiskProbability a skos:Concept ;
  skos:prefLabel "Risk probability"@en ;
  skos:definition "Probability [0..1] of the hazard event under model assumptions."@en .
amblink:PredictedConcentration a skos:Concept ;
  skos:inScheme amblink:ObservedProperty ;
  skos:prefLabel "Predicted concentration (e.g., CFU per g)"@en ;
  skos:definition "Predicted concentration of the hazard (e.g., CFU/g, μg/kg)."@en .

amblink:ToxinConcentration a skos:Concept ;
  skos:inScheme amblink:ObservedProperty ;
  skos:prefLabel "Toxin concentration (e.g. µg/kg)"@en ;
  skos:definition "Concentration of a chemical hazard (mycotoxin) in the matrix."@en .

amblink:Dose a skos:Concept ;
  skos:inScheme amblink:ObservedProperty ;
  skos:prefLabel "Dose (e.g., CFU per person/serving)"@en .

amblink:IllnessCasesPer100k a skos:Concept ;
  skos:inScheme amblink:ObservedProperty ;
  skos:prefLabel "Illness cases per 100 000 persons"@en ;
  skos:definition "Predicted number of illness cases per 100 000 exposed individuals over the modeled period."@en .

amblink:Infection a skos:Concept ;
  skos:inScheme amblink:Endpoint ;
  skos:prefLabel "Infection"@en .

amblink:Illness a skos:Concept ;
  skos:inScheme amblink:Endpoint ;
  skos:prefLabel "Illness"@en .

amblink:Oral a skos:Concept ;
  skos:inScheme amblink:ExposureRoute ;
  skos:prefLabel "Oral"@en .

amblink:GeneralPopulation a skos:Concept ;
  skos:inScheme amblink:Population ;
  skos:prefLabel "General population"@en .

# Risk Levels
amblink:RiskLow a skos:Concept ;
  skos:inScheme amblink:RiskLevel ;
  skos:prefLabel "Low risk"@en .

amblink:RiskModerate a skos:Concept ;
  skos:inScheme amblink:RiskLevel ;
  skos:prefLabel "Moderate risk"@en .

amblink:RiskHigh a skos:Concept ;
  skos:inScheme amblink:RiskLevel ;
  skos:prefLabel "High risk"@en .

amblink:RiskVeryHigh a skos:Concept ;
  skos:inScheme amblink:RiskLevel ;
  skos:prefLabel "Very high risk"@en .

# Statistical Metrics
amblink:Mean a skos:Concept ;
  skos:inScheme amblink:Statistic ;
  skos:prefLabel "Mean"@en .

amblink:Median a skos:Concept ;
  skos:inScheme amblink:Statistic ;
  skos:prefLabel "Median (P50)"@en .

amblink:Percentile05 a skos:Concept ;
  skos:inScheme amblink:Statistic ;
  skos:prefLabel "5th Percentile (Lower Bound)"@en .

amblink:Percentile95 a skos:Concept ;
  skos:inScheme amblink:Statistic ;
  skos:prefLabel "95th Percentile (Upper Bound)"@en .

amblink:ObservedProperty a skos:ConceptScheme ;
    skos:prefLabel "Observed properties (Ambrosia)"@en ;
    dct:description "Controlled vocabulary of observable quantities used in Ambrosia QMRA models."@en .

### Probabilities -> Risk & Rates ################################

amblink:TransferProbability a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Transfer rate"@en ;
    skos:altLabel "Cross-contamination probability"@en .

amblink:ExposureProbability a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Exposure risk"@en ;
    skos:altLabel "Prevalence of exposure"@en .

amblink:IllnessProbability a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Risk of illness"@en ;
    skos:altLabel "Probability of illness"@en .

amblink:MeanIllnessProbability a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Average population risk"@en ;
    skos:altLabel "Mean illness probability"@en .

### CFU counts -> Loads ##########################################

amblink:TransferredCFUCount a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Transferred load"@en ;
    skos:altLabel "CFU per portion transferred"@en .

### Doses ########################################################

amblink:IngestedDose a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Ingested dose"@en ;
    skos:altLabel "Intake level"@en .

### Concentrations ###############################################

amblink:FoodContaminationConcentration a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Pathogen concentration"@en ;
    skos:altLabel "Contamination level"@en .

### Time & Summary ###############################################

amblink:SimulationTimeSeries a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Simulation timeline"@en ;
    skos:altLabel "Time series"@en .

amblink:RiskSummaryTable a skos:Concept ;
    skos:inScheme amblink:ObservedProperty ;
    skos:prefLabel "Risk characterization"@en ;
    skos:altLabel "Risk profile"@en, "Summary table"@en .
